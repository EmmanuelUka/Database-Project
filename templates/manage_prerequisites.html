<head>
    <title>Manage Prerequisites</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/student.css') }}">

</head>

<body>
    <nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand active" href="#">Instructor Portal</a>
        </div>
        <ul class="nav navbar-nav">
            <li><a href="#">Dashboard</a></li>
            <li><a href="/instructor/sections">Grades</a></li>
            <li><a href="/instructor/advising">Advisor</a></li>
            <li class="active"><a href="/instructor/prerequisites">Course Prerequisites</a></li>
            <li><a href="/instructor/sections">Section</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li>
                <a href="#" >
                    <span class="glyphicon glyphicon-user"></span> Profile</a></li>
  </div>
</nav>
<h1>Manage Prerequisites</h1>

<h2>Select a Course</h2>
<form method="get">
    <select name="course_id" onchange="this.form.submit()">
        <option value="">-- Choose a course --</option>
        {% for c in courses %}
            <option value="{{ c.course_id }}" {% if c.course_id == selected_course_id %}selected{% endif %}>
                {{ c.c_name }} ({{ c.course_id }})
            </option>
        {% endfor %}
    </select>
</form>

{% if selected_course_id %}
    <h2>Current Prerequisites for {{ selected_course_id }}</h2>
    {% if prerequisites %}
        <ul>
            {% for p in prerequisites %}
                <li>
                    {{ p.c_name }} ({{ p.course_id }})
                    <form method="POST" action="{{ url_for('remove_prerequisite') }}" style="display:inline;">
                        <input type="hidden" name="course_id" value="{{ selected_course_id }}">
                        <input type="hidden" name="prereq_id" value="{{ p.course_id }}">
                        <button type="submit">Remove</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No prerequisites yet.</p>
    {% endif %}

    <h2>Add a Prerequisite</h2>
    <form method="POST" action="{{ url_for('add_prerequisite') }}">
        <input type="hidden" name="course_id" value="{{ selected_course_id }}">
        <select name="prereq_id" required>
            <option value="">Select a course</option>
            {% for c in available_courses %}
                <option value="{{ c.course_id }}">{{ c.c_name }} ({{ c.course_id }})</option>
            {% endfor %}
        </select>
        <button type="submit">Add</button>
    </form>
{% endif %}
</body>
